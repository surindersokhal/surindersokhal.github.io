<html>
    <head>
        <meta charset="utf-8">
        <link href="d3-geomap/css/d3.geomap.css" rel="stylesheet">
        <script src="d3-geomap/vendor/d3.geomap.dependencies.min.js"></script>
        <script src="d3-geomap/js/d3.geomap.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    </head>
    <style>
        path.unit:hover{
        fill:red;
        }
    </style>
    <script type="text/javascript">
        function bad(){
        
        
        
           var format = function(d) {
        d = d / 10;
        return d3.format(',.01f')(d);
        }
        
        var map = d3.geomap.choropleth()
        .geofile('d3-geomap/topojson/world/countries.json')
        .colors(colorbrewer.PuBuGn[9])
        .column('2006-08')
        .format(format)
        .legend(true)
        .unitId('Country Code');
        
        d3.csv('food_consumption.csv', function(error, data) {
        d3.select('#map')
          .datum(data)
          .call(map.draw, map);
        });
        
        }
        function good(){
        
        
        
          var format = function(d) {
        d = d / 10;
        return d3.format(',.01f')(d);
        }
        
        var map = d3.geomap.choropleth()
        .geofile('d3-geomap/topojson/world/countries.json')
        .colors(['#053061','#2166ac','#4393c3','#92c5de','#d1e5f0','#fddbc7','#f4a582','#d6604d','#b2182b','#67001f'])
        .column('2006-08')
        .format(format)
        
        .legend(true)
        .unitId('Country Code');
        
        d3.csv('food_consumption.csv', function(error, data) {
        d3.select('#map2')
          .datum(data)
          .call(map.draw, map);
        });
        }
        
        
    </script>
    <body>
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-6" id="map">
                    <h3 style="text-align: center; margin-bottom: 35px"> Energy Consumed by countries (Calories)</h3>
                    <script type="text/javascript">
                        bad();
                    </script>
                </div>
                <div class="col-lg-6" id="map2">
                    <h3 style="text-align: center; margin-bottom: 35px"> Energy Consumed by countries (Calories)</h3>
                    <script type="text/javascript">
                        good();
                    </script>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6" id="map" style="margin-top:30px">
                    <p> This color scheme used here is inappropriate. Though the color schemes do represent the divergence in the data but it is not a right choice of color. There is no link between the blue and green color. Wise choice of color may help to understand the information easily.
                    <a style="text-align: center; margin-top: 15px" href="http://maps.ramiro.org/calories-countries/#" target="_blank">Click to view the data</a>  
                </div>
                <div class="col-lg-6" id="map2" style="margin-top:30px">
                <p> Though the color scheme looks similar to the one on the left but one thing that distinguish it is the right choice of color because this graph represents the Consumption of energy (Calories). Generally hotter/more-energy are represented with red color and colder/less-energy is represented by blue color. Therefore chosing red color for more calories consumption and blue for less calorie consumption makes more sense.
                    <a style="text-align: center; margin-top: 15px" href="http://maps.ramiro.org/calories-countries/#" target="_blank"> Click to view the data</a>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12" style="text-align: left; margin-top: 30px; margin-left:40px">
                    <p>Note: The value is calculated in two steps:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;1) Calculate the median.<br>
                         &nbsp;&nbsp;&nbsp;&nbsp;2) Subtract each value from median to find the divergence from middle.<br>
                </div>
            </div>
        </div>
    </body>
</html>